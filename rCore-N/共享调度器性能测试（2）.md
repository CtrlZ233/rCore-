### 单线程下对比王文智学长的实验

#### 1. 串行管道环

Server 同步读（字符串长度1）

|环长|64|128 | 256 | 512 | 1024 | 2048 | 3600 | 4000|
|---|---|---|---|---| ---| --- | --- | --- |
|AsyncOS| 87 ms | 134 ms | 205 ms| 347 ms  | 650 ms| 1272 ms| 2269 ms |2599 ms|
| rCore-N| 22 ms | 42 ms | 77 ms| 167 ms | 308 ms | 614 ms | 1097 ms|


Server 同步读（字符串长度228）

|环长|64|128 | 256 | 512 | 1024 | 2048 | 3600 | 4000|
|---|---|---|---|---| ---| --- | --- | --- |
|AsyncOS| 92 ms | 134 ms | 207 ms| 357 ms  | 665 ms| 1309 ms| 2317 ms | 2653 ms|
| rCore-N|34 ms | 59 ms | 99 ms| 178 ms | 333 ms | 651 ms | 1186 ms |


Server 同步读（字符串长度912）

|环长|64|128 | 256 | 512 | 1024 | 2048 | 3600 | 4000|
|---|---|---|---|---| ---| --- | --- | --- |
|AsyncOS| 94 ms | 134 ms | 215 ms| 392 ms  | 711 ms| 1399 ms| 2543 ms |2795 ms|
| rCore-N| 42 ms | 71 ms | 117 ms| 230 ms | 494 ms  | 848 ms | 1461 ms |
	
Server 同步读（字符串长度3876）

|环长|64|128 | 256 | 512 | 1024 | 2048 | 3600 |4000|
|---|---|---|---|---| ---| --- | --- | --- |
|AsyncOS| 104 ms | 165 ms | 271 ms| 522 ms  | 1007 ms| 1907 ms| 3238 ms | 3620 ms|
| rCore-N| 61 ms | 103 ms | 184 ms| 351 ms | 740 ms | 1361 ms | 2427 ms |

Server 异步读（字符串长度1）

|环长|16 |32 | 64|128 | 256 | 512 |
|---|---|---|---|---| ---| --- |
|AsyncOS| 199 ms | 372 ms | 714 ms | 1401 ms | 2767 ms| 5488 ms  | 
| rCore-N|15 ms | 22 ms | 43 ms| 74 ms | 131 ms | 262 ms |

Server 异步读（字符串长度228）

|环长|16 |32 | 64|128 | 256 | 512 |
|---|---|---|---|---| ---| --- |
|AsyncOS|  199 ms | 371 ms | 713 ms | 1399 ms | 2767 ms| 5495 ms  | 
| rCore-N|17 ms | 23 ms | 46 ms| 76 ms | 144 ms | 278 ms |

Server 异步读（字符串长度912）

|环长|16 |32 | 64|128 | 256 | 512 |
|---|---|---|---|---| ---| --- |
|AsyncOS| 200 ms | 371 ms | 719 ms | 1400 ms | 2767 ms|  5497 ms  | 
| rCore-N|17 ms | 28 ms | 53 ms| 84 ms | 166 ms | 313 ms |

Server 异步读（字符串长度3876）
	
|环长|16 |32 | 64|128 | 256 | 512 |
|---|---|---|---|---| ---| --- |
|AsyncOS| 202 ms | 376 ms | 715 ms | 1401 ms | 2767 ms| 5502 ms  | 
| rCore-N| 25 ms | 38 ms | 75 ms| 149 ms | 269 ms | 534 ms |


### 多线程下管道环的性能提升

实验设置4个环，每个环长度512，就绪队列布局如下：
![](../image/Pasted-image-20221230045519.png)


性能对比如下：

同步读
|线程数| 1|2 | 3 | 4 | 5 | 
|---|---|---| --- | ---| --- |
| 字符串长度3876| 1872 ms | 940 ms | 760 ms| 609 ms | 1906 ms |
| 字符串长度912| 907 ms | 547 ms | 420 ms| 387 ms | 1998 ms |
| 字符串长度228| 659 ms | 431 ms | 376 ms| 367 ms | 2039 ms |
| 字符串长度1| 597 ms | 389 ms | 334 ms| 329 ms | 2007 ms |



